<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cart - E-Buy Book Store</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
  body {
    padding: 20px;
  }
  .cart-table {
    max-width: 90%;
    margin: auto;
  }
  .text-end {
    text-align: end;
  }

  /* Back button hover customization */
  a.btn-outline-secondary:hover {
    color: rgb(255, 255, 255) !important;
    background-color: #000000 !important;
    border-color: #c8d0d6 !important;
  }
  a.btn-warning{
    text-decoration: none;
  }
</style>

</head>
<body>
    <div class="mb-3">
    <a href="catalogue.html" class="btn btn-outline-secondary">&larr; Back</a>
  </div>
  <h2 class="text-center mb-4">Your Cart/Order</h2>

  <div class="cart-table">
    <table class="table table-bordered table-striped">
      <thead class="table-light">
        <tr>
          <th>Book</th>
          <th>Price</th>
          <th>Quantity</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody id="cart-body">
        <!-- Items added dynamically -->
      </tbody>
      <tfoot>
        <tr>
          <th colspan="3" class="text-end">Grand Total</th>
          <th id="grand-total">Rs 0</th>
        </tr>
      </tfoot>
    </table>

    <div class="text-center mt-4">
      <button class="btn btn-primary" onclick="placeOrder()">Place Order</button>
      <button class="btn btn-secondary ms-2" onclick="clearCart()">Clear Cart</button>
      <a href="catalogue.html" class="btn btn-warning ms-3">&larr; Add More</a>
    </div>
  </div>

  <script>
    function loadCart() {
      const cart = JSON.parse(localStorage.getItem("cart")) || [];
      const cartBody = document.getElementById("cart-body");
      const grandTotal = document.getElementById("grand-total");

      cartBody.innerHTML = "";
      let totalAmount = 0;

      cart.forEach(item => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${item.book}</td>
          <td>Rs ${item.price.toFixed(2)}</td>
          <td>${item.quantity}</td>
          <td>Rs ${item.total.toFixed(2)}</td>
        `;
        cartBody.appendChild(tr);
        totalAmount += item.total;
      });

      grandTotal.textContent = `Rs ${totalAmount.toFixed(2)}`;
    }

    function clearCart() {
      localStorage.removeItem("cart");
      loadCart();
    }

    function placeOrder() {
      alert("Order placed successfully!");
      clearCart();
    }

    window.onload = loadCart;
  </script>
</body>
</html>
